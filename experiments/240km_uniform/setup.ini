[machine]
project_root = <REPLACE>

[target]
entrypoint = ${machine:project_root}/src/core_atmosphere/dynamics/mpas_atm_time_integration.F90
search_patterns = 
    ^::atm_time_integration::.+
ignore_patterns =
    ::atm_time_integration::atm_advance_scalars_mono_work::scale_arr
additional_plugin_flags =
    -rose:skip_unparse
    -rose:skipfinalCompileStep
    -rose:skip_syntax_check
    -I.
    -I/glade/u/apps/ch/opt/mpt/2.22/include/
    -I/glade/work/jdvanover/ROSE/install/share/rose
    -D_MPI
    -DNOMPIMOD
    -DROSE_COMP
    -DCORE_ATMOSPHERE
    -DMPAS_NAMELIST_SUFFIX=atmosphere
    -DMPAS_NATIVE_TIMERS

[build]
normal_cmd = ./scripts/build_MPAS_atm_gnu.sh
normal_wd = ${machine:project_root}
rose_depends_cmd = ./scripts/build_MPAS_atm_rose.sh
rose_depends_wd = ${machine:project_root}

[run]
cmd = qsub -V run_job.sh
working_dir = ${machine:project_root}/experiments/240km_uniform
timeout = 300

[eval]
cmd = python3 eval.py
working_dir = ${machine:project_root}/experiments/240km_uniform
pass_log_path = True
cost_threshold = 300

[cheyenne]
copy_ignore =
    atmosphere_model
    history.*
    diag.*
    restart.*