[machine]
project_root = <REPLACE>

[target]
entrypoint = ${machine:project_root}/src/core_atmosphere/dynamics/mpas_atm_time_integration.F
search_patterns = 
    ^::atm_time_integration::.+
ignore_patterns = 
additional_plugin_flags =
    -rose:skip_unparse
    -rose:skipfinalCompileStep
    -rose:skip_syntax_check
    -I.
    -I/glade/u/apps/ch/opt/mpt/2.22/include/
    -I/glade/work/jdvanover/ROSE/install/share/rose
    -D_MPI
    -DNOMPIMOD
    -DROSE_COMP
    -DCORE_ATMOSPHERE
    -DMPAS_NAMELIST_SUFFIX=atmosphere
    -DMPAS_NATIVE_TIMERS

[build]
normal_cmd = ${machine:project_root}/scripts/build_MPAS_atm_gnu.sh
rose_depends_cmd = ${machine:project_root}/scripts/build_MPAS_atm_rose.sh

[run]
cmd = qsub -V run_job.sh
timeout = 300

[eval]
cmd = python3 eval.py
pass_log_path = True

# taken from average kernel execution time in
# microseconds on a single cheyenne node
cost_threshold = 300

[cheyenne]
copy_ignore =
    atmosphere_model
    history.*
    diag.*
    restart.*