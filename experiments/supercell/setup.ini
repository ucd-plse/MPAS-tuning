[machine]
project_root = /glade/work/jdvanover/latest_and_greatest/MPAS/MPAS-Model
src_search_paths = ${project_root}/src

[target]
src_files = ${machine:project_root}/src/core_atmosphere/dynamics/mpas_atm_time_integration.F90
search_patterns = 
    ^::atm_time_integration::.+
ignore_patterns =
    ::atm_time_integration::atm_advance_scalars_mono_work::scale_arr
additional_plugin_flags =
    -D_MPI
    -DNOMPIMOD
    -DROSE_COMP
    -DCORE_ATMOSPHERE
    -DMPAS_NAMELIST_SUFFIX=atmosphere
    -DMPAS_NATIVE_TIMERS
    -DDO_PHYSICS

[build]
cmd = ./scripts/build_MPAS_atm_gnu.sh
working_dir = ${machine:project_root}
partial_build_cmd = ./scripts/build_MPAS_atm_gnu_partial.sh

[run]
cmd = qsub -V run_job.sh
working_dir = ${machine:project_root}/experiments/240km_uniform
timeout = 390

[eval]
cmd = python3 eval.py
working_dir = ${machine:project_root}/experiments/240km_uniform
pass_log_path = True
cost_threshold = 300

[cheyenne]
copy_ignore =
    atmosphere_model
    history.*
    diag.*
    restart.*